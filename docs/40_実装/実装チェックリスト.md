# 実装チェックリスト（私が担当するタスク）

目的: このチェックリストは、私が実装を進める際に使う具体的な作業項目を列挙します。各項目は完了時点でチェックを入れ、作業ログを残します。

- [x] 1. `app/docs-preview` のアーカイブ確認（ユーザー実施） — アーカイブ済
- [x] 2. `docs/40_実装/実装タスク.md` の作成（ドラフト） — 完了
- [x] 3. 参照ドキュメントに画面コンポーネント定義等を追加 — 完了

インフラ & 設定
- [x] 4. Firebase プロジェクト初期化（`firebase.json`・`.firebaserc`・`.env.example`） — 完了
  - ファイル作成: `.env.example`, `.firebaserc`, `firebase.json`, `lib/firebase.ts`
  - Cloud Functions: `functions/` 初期化（TypeScript）
  - package.json に scripts 追加（firebase deploy, functions:build 等）
- [x] 5. Firestore セキュリティルール・インデックス定義の作成 — 完了
  - `firestore.rules`: ユーザー/質問/回答/通知/カテゴリの権限設定
  - `firestore.indexes.json`: クエリ性能向上用インデックス定義
- [x] 6. CI/CD（GitHub Actions）でのビルド/テストパイプライン構築 — 完了
  - `.github/workflows/build-test.yml`: PR と push 時の lint/build/test
  - `.github/workflows/deploy.yml`: main ブランチへの push で Firebase に自動デプロイ

認証 / ユーザー
- [x] 7. LINE OAuth のモック/ラッパー実装（ローカルでテスト可能に） — 完了
  - `app/api/auth/line/callback/route.ts`: LINE OAuth コールバック処理
  - `app/api/auth/mock-login/route.ts`: ローカル開発用モックログイン
  - `functions/src/auth.ts`: Custom Token 生成関数
- [x] 8. 初回プロフィール登録 API + UI（A030） — 完了
  - `app/api/users/profile/route.ts`: プロフィール登録/取得 API
  - `app/api/system/categories/route.ts`: カテゴリ取得 API
  - `app/profile/register/page.tsx`: プロフィール登録 UI（A030）

質問 / 回答 ワークフロー
- [x] 9. 質問投稿 API (`questions` 作成) と LIFF フロント（L010/L011/L012） — 完了
  - `app/api/questions/route.ts`: 質問投稿・一覧取得 API
  - `app/api/questions/[questionId]/answers/route.ts`: 回答投稿・一覧取得 API
  - `app/liff/question/post/page.tsx`: 質問投稿画面（ステップフォーム）
- [x] 10. マッチング関数（地域×カテゴリ）と通知モック（LINE マルチキャスト） — 完了
  - `functions/src/matching.ts`: 質問マッチング関数（Firestore トリガー）
  - `functions/src/notifications.ts`: 通知管理・LINE 統合
  - `app/api/notifications/route.ts`: 通知取得 API
  - `functions/package.json` に axios を追加
- [x] 11. 回答投稿 API（`questions/{id}/answers`） + `answerCount` のトランザクション更新 — 完了
  - 回答投稿時に answerCount を自動インクリメント
- [x] 12. スレッド管理（`threads`）とラリー制御（自動クローズ） — 完了
  - `functions/src/threads.ts`: スレッド作成・ラリー追加・自動クローズ機能
  - `app/api/questions/[questionId]/[answerId]/threads/route.ts`: ラリー API
  - ラリー数上限（MAX_RALLY = 5）、24時間自動クローズ機能を実装

UI 実装
- [x] 13. PRサイト（A010） / OAuth 選択（A020） / 初回登録（A030） — 完了
  - `app/page.tsx`: PRサイト（A010）- ランディングページ
  - `app/auth/login/page.tsx`: OAuth 選択画面（A020） - LINE・Google ログイン
  - `app/profile/register/page.tsx`: 初回プロフィール登録（A030）- 既存
- [x] 14. ホーム（A040） / 質問一覧（A041） / 質問詳細（L020） — 完了
  - `app/home/page.tsx`: ホーム画面（A040）- 質問一覧タブ表示
  - `app/questions/[questionId]/page.tsx`: 質問詳細・回答投稿（L020）
- [x] 15. マイページ（D010） / プロフィール編集（D020） / 設定（F010） / 退会（F040） — 完了
  - `app/profile/page.tsx`: マイページ（D010）- ユーザー情報・メニュー表示
  - `app/profile/edit/page.tsx`: プロフィール編集（D020）- 情報更新フォーム
  - `app/settings/page.tsx`: 設定（F010）- 通知・プライバシー設定
  - `app/profile/withdraw/page.tsx`: 退会画面（F040）- アカウント削除確認

品質 / 運用
- [ ] 16. 単体テスト・統合テスト（API/Cloud Functions）
- [ ] 17. 監査ログ（`audits`）・エラーロギングの実装
- [ ] 18. 自動クローズ/エスカレーション処理のスケジューラ実装
- [ ] 19. Seed スクリプト（カテゴリ・テンプレート）
- [ ] 20. README にセットアップ手順を追記

備考: 各項目はさらに小タスク（PR レベル）に分割して GitHub Issues に移行します。優先度は MVP の項目を先に処理します。必要なら最初の 10 チケットを自動作成します。
